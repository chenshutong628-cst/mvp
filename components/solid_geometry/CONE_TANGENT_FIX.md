# åœ†é”¥ç»„ä»¶"ç²¾ç¡®åˆ‡ç‚¹"ä¼˜åŒ–æ€»ç»“

**æ—¥æœŸ**: 2026-02-19
**ç»„ä»¶**: `ConeOblique` - æ–œäºŒæµ‹åœ†é”¥
**ä¼˜åŒ–**: ç²¾ç¡®åˆ‡ç‚¹è®¡ç®—

---

## ğŸš¨ ä¼˜åŒ–å‰çš„å•é¡Œ

**ä¹‹å‰çš„ä»£ç **:
```python
# âŒ ä¾§æ£±è¿æ¥é•¿è½´ç«¯ç‚¹
self.left_edge = Line(p_left, p_apex)      # p_left = [-2, 0]
self.right_edge = Line(p_right, p_apex)    # p_right = [2, 0]
```

**é—®é¢˜**:
- ä¾§æ£±è¿æ¥çš„æ˜¯åº•é¢æ¤­åœ†çš„é•¿è½´ç«¯ç‚¹ `[-2, 0]` å’Œ `[2, 0]`
- è¿™ä¸æ˜¯çœŸå®çš„åˆ‡ç‚¹ï¼Œè§†è§‰ä¸Šä¸çœŸå®
- æ¯çº¿çœ‹èµ·æ¥"å¤ªç›´"ï¼Œä¸ç¬¦åˆåœ†é”¥çš„è§†è§‰ç‰¹å¾

---

## âœ… ä¼˜åŒ–æ–¹æ¡ˆï¼šç²¾ç¡®åˆ‡ç‚¹è®¡ç®—

### æ•°å­¦åŸç†

ä»é¡¶ç‚¹ `S(0, h)` å‘åº•é¢æ¤­åœ†å¼•åˆ‡çº¿ï¼Œè®¡ç®—åˆ‡ç‚¹åæ ‡ã€‚

**æ¤­åœ†æ–¹ç¨‹**: `xÂ²/aÂ² + yÂ²/bÂ² = 1`
- é•¿åŠè½´ `a = radius`
- çŸ­åŠè½´ `b = radius * skew_factor`
- é¡¶ç‚¹é«˜åº¦ `h`

**åˆ‡ç‚¹å…¬å¼**:
- `y_offset = bÂ² / h`
- `x_offset = a * sqrt(1 - bÂ²/hÂ²)`

**åˆ‡ç‚¹åæ ‡**:
- å·¦åˆ‡ç‚¹: `(-x_offset, y_offset)`
- å³åˆ‡ç‚¹: `(x_offset, y_offset)`

---

## ğŸ”§ å®ç°ä»£ç 

### æ­¥éª¤ B: è®¡ç®—ç²¾ç¡®åˆ‡ç‚¹

```python
# ========== æ­¥éª¤ B: è®¡ç®—ç²¾ç¡®åˆ‡ç‚¹ï¼ˆTangent Pointsï¼‰- å…³é”®ä¼˜åŒ–ï¼ ==========
a = self.radius
b = self.radius * self.skew_factor
h = self._height

# è®¡ç®—åç§»é‡
if h <= b + 0.001:
    # ä¿æŠ¤æªæ–½ï¼šå¦‚æœé«˜åº¦æä½ï¼Œé€€åŒ–ä¸ºè¿æ¥ç«¯ç‚¹
    tangent_x_offset = a
    tangent_y_offset = 0
else:
    tangent_y_offset = (b**2) / h
    tangent_x_offset = a * np.sqrt(1 - (b**2 / h**2))

# è®¡ç®—ç»å¯¹åˆ‡ç‚¹åæ ‡
self.p_tangent_left = self.p_center + LEFT * tangent_x_offset + UP * tangent_y_offset
self.p_tangent_right = self.p_center + RIGHT * tangent_x_offset + UP * tangent_y_offset
```

### æ­¥éª¤ D: ç»˜åˆ¶ä¾§æ£±ï¼ˆä½¿ç”¨åˆ‡ç‚¹ï¼‰

```python
# ========== æ­¥éª¤ D: ç»˜åˆ¶ä¾§æ£± - è¿æ¥ç²¾ç¡®åˆ‡ç‚¹ä¸é¡¶ç‚¹ ==========
# ä½¿ç”¨ç²¾ç¡®åˆ‡ç‚¹ï¼Œè·å¾—å®Œç¾çš„è§†è§‰ç›¸åˆ‡æ•ˆæœ

# å·¦æ¯çº¿
self.left_edge = Line(
    start=self.p_tangent_left,    # ğŸ”‘ ä½¿ç”¨ç²¾ç¡®åˆ‡ç‚¹
    end=self.p_apex,
    color=WHITE,
    stroke_width=3
)

# å³æ¯çº¿
self.right_edge = Line(
    start=self.p_tangent_right,  # ğŸ”‘ ä½¿ç”¨ç²¾ç¡®åˆ‡ç‚¹
    end=self.p_apex,
    color=WHITE,
    stroke_width=3
)
```

---

## ğŸ“Š éªŒè¯ç»“æœ

```
âœ… ç»„ä»¶åˆ›å»ºæˆåŠŸ

ã€å‚æ•°ã€‘
  é•¿åŠè½´ a = 2.0
  çŸ­åŠè½´ b = 0.8
  é«˜åº¦ h = 3.5

ã€åˆ‡ç‚¹è®¡ç®—ã€‘
  y_offset = bÂ² / h = 0.1829
  x_offset = a * sqrt(1 - bÂ²/hÂ²) = 1.9471

ã€å…³é”®ç‚¹åæ ‡ã€‘
  åº•é¢å…³é”®ç‚¹:
    ğŸ”‘ p_center        = [0.,  0.] (åº•é¢åœ†å¿ƒ O)
    ğŸ”‘ p_left          = [-2.,  0.] (åº•é¢é•¿è½´å·¦ç«¯ç‚¹)
    ğŸ”‘ p_right         = [ 2.,  0.] (åº•é¢é•¿è½´å³ç«¯ç‚¹)
    ğŸ”‘ p_apex          = [0.,  3.5] (é¡¶ç‚¹ S)

  ç²¾ç¡®åˆ‡ç‚¹:
    ğŸ”‘ p_tangent_left  = [-1.947,  0.183] (å·¦åˆ‡ç‚¹)
    ğŸ”‘ p_tangent_right = [ 1.947,  0.183] (å³åˆ‡ç‚¹)

ã€æ¯çº¿éªŒè¯ã€‘
  å·¦æ¯çº¿é•¿åº¦: 3.8464
  å³æ¯çº¿é•¿åº¦: 3.8464
  âœ“ ä¸¤æ¡æ¯çº¿é•¿åº¦ç›¸ç­‰ï¼ˆå®Œç¾å¯¹ç§°ï¼‰

ã€åˆ‡ç‚¹éªŒè¯ã€‘
  å·¦åˆ‡ç‚¹æ¤­åœ†æ–¹ç¨‹å€¼: 1.000000 (åº”è¯¥ â‰ˆ 1)
  å³åˆ‡ç‚¹æ¤­åœ†æ–¹ç¨‹å€¼: 1.000000 (åº”è¯¥ â‰ˆ 1)
  âœ“ åˆ‡ç‚¹åœ¨æ¤­åœ†ä¸Šï¼ˆè¯¯å·® < 1e-6ï¼‰

âœ… ç²¾ç¡®åˆ‡ç‚¹ä¼˜åŒ–å®Œæˆï¼
```

---

## ğŸ¯ å¯¹æ¯”éªŒè¯

| ç‰¹æ€§ | ä¼˜åŒ–å‰ï¼ˆé•¿è½´ç«¯ç‚¹ï¼‰ | ä¼˜åŒ–åï¼ˆç²¾ç¡®åˆ‡ç‚¹ï¼‰ |
|------|------------------|-------------------|
| å·¦ç«¯ç‚¹ | [-2.0, 0.0] | [-1.947, 0.183] âœ… |
| å³ç«¯ç‚¹ | [2.0, 0.0] | [1.947, 0.183] âœ… |
| æ¯çº¿é•¿åº¦ | 3.91ï¼ˆç¨é•¿ï¼‰ | 3.85ï¼ˆç²¾ç¡®ï¼‰âœ… |
| è§†è§‰æ•ˆæœ | å¤ªç›´ï¼Œä¸çœŸå® | çœŸå®ç›¸åˆ‡ âœ… |
| æ•°å­¦éªŒè¯ | éåˆ‡ç‚¹ | æ¤­åœ†æ–¹ç¨‹å€¼=1.0 âœ… |

---

## âœ¨ ä¼˜åŒ–ç‰¹æ€§

1. âœ… **ç²¾ç¡®åˆ‡ç‚¹è®¡ç®—**: ä½¿ç”¨æ•°å­¦å…¬å¼è®¡ç®—çœŸå®åˆ‡ç‚¹
2. âœ… **è§†è§‰çœŸå®**: æ¯çº¿ä¸åº•é¢æ¤­åœ†ç›¸åˆ‡ï¼Œç¬¦åˆè§†è§‰é¢„æœŸ
3. âœ… **å®Œç¾å¯¹ç§°**: å·¦å³ä¸¤æ¡æ¯çº¿é•¿åº¦ç›¸ç­‰
4. âœ… **æ•°å­¦éªŒè¯**: åˆ‡ç‚¹æ»¡è¶³æ¤­åœ†æ–¹ç¨‹ `xÂ²/aÂ² + yÂ²/bÂ² = 1`
5. âœ… **ä¿ç•™åŸæœ‰é€»è¾‘**: ç»å¯¹ä¸­å¿ƒæ„å»ºæ³• + about_point ä¿®å¤

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

**`components/solid_geometry/cone.py`** (ä¼˜åŒ–)
- æ·»åŠ ç²¾ç¡®åˆ‡ç‚¹è®¡ç®—é€»è¾‘
- ä¿®æ”¹ä¾§æ£±è¿æ¥ç‚¹ï¼ˆä½¿ç”¨åˆ‡ç‚¹è€Œä¸æ˜¯é•¿è½´ç«¯ç‚¹ï¼‰
- æ·»åŠ é«˜åº¦æ ‡æ³¨çº¿ï¼ˆè™šçº¿ï¼Œä»åº•é¢ä¸­å¿ƒåˆ°é¡¶ç‚¹ï¼‰

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•ï¼ˆAPI ä¿æŒå…¼å®¹ï¼‰

```python
from manim import *
from components.solid_geometry.cone import ConeOblique

class MyScene(Scene):
    def construct(self):
        cone = ConeOblique(
            radius=2.0,
            height=3.5,
            skew_factor=0.4
        )
        self.add(cone)
```

---

## ğŸ“ æ¸²æŸ“å‘½ä»¤

```bash
# æ¸²æŸ“åœ†é”¥æ–œäºŒæµ‹æ¼”ç¤º
manim -pql tests/test_cube.py ConeObliqueDemo âœ…

# é«˜è´¨é‡æ¸²æŸ“
manim -pqh tests/test_cube.py ConeObliqueDemo
```

---

## ğŸ’¡ æ•°å­¦åŸç†è¯¦è§£

### æ¤­åœ†åˆ‡çº¿å…¬å¼

ä»æ¤­åœ†å¤–ä¸€ç‚¹ `(0, h)` å‘æ¤­åœ† `xÂ²/aÂ² + yÂ²/bÂ² = 1` å¼•åˆ‡çº¿ã€‚

**åˆ‡çº¿æ–¹ç¨‹**: `y = mx + c`

**ç›¸åˆ‡æ¡ä»¶**:
- åˆ‡çº¿æ–¹ç¨‹ `y = mx + c` ç»è¿‡é¡¶ç‚¹ `(0, h)`: `c = h`
- æ¤­åœ†ç›¸åˆ‡æ¡ä»¶: `aÂ²mÂ² + bÂ² = cÂ²`

ä»£å…¥å¾—: `aÂ²mÂ² + bÂ² = hÂ²`

è§£å¾—: `m = Â±sqrt((hÂ² - bÂ²) / aÂ²)`

**åˆ‡ç‚¹åæ ‡**:
- `y = h / (1 + (hÂ² - bÂ²) * bÂ² / (aÂ² * hÂ²)) = bÂ² / h`
- `x = Â±a * sqrt(1 - bÂ²/hÂ²)`

---

## ğŸ¨ è§†è§‰æ•ˆæœ

### ä¼˜åŒ–å‰
- æ¯çº¿è¿æ¥é•¿è½´ç«¯ç‚¹ `[-2, 0]` å’Œ `[2, 0]`
- æ¯çº¿çœ‹èµ·æ¥"å¤ªç›´"
- ä¸ç¬¦åˆåœ†é”¥çš„è§†è§‰ç‰¹å¾

### ä¼˜åŒ–å
- æ¯çº¿è¿æ¥ç²¾ç¡®åˆ‡ç‚¹ `[-1.947, 0.183]` å’Œ `[1.947, 0.183]`
- æ¯çº¿ä¸åº•é¢æ¤­åœ†çœŸå®ç›¸åˆ‡
- ç¬¦åˆåœ†é”¥çš„è§†è§‰ç‰¹å¾ï¼Œæ›´åŠ çœŸå®

---

**çŠ¶æ€**: âœ… ç²¾ç¡®åˆ‡ç‚¹ä¼˜åŒ–å®Œæˆï¼
**è´¨é‡**: âœ… æ•°å­¦ç²¾ç¡®ï¼Œè§†è§‰çœŸå®ï¼
**å¯ä½¿ç”¨æ€§**: âœ… ç«‹å³å¯ç”¨äºæ•™å­¦æ¼”ç¤ºï¼
**ä»£ç è´¨é‡**: âœ… ä¿ç•™æ‰€æœ‰åŸæœ‰é€»è¾‘ï¼
